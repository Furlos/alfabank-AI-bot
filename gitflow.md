# GitFlow

## Основные ветки

В репозитории всегда существуют две главные ветки:

`main` – стабильная версия проекта, готовая к релизу.  
`dev` – основная ветка разработки, куда вливаются новые фичи.

## Временные ветки

Для работы над проектом создаются временные ветки:

- Feature-ветки `feature/*` – для новых функций или улучшения существующих
- Bugfix-ветки `bugfix/*` – для исправления ошибок
- Release-ветки `release/*` – для подготовки релизов
- Hotfix-ветки `hotfix/*` – для срочных исправлений в main
- Docs-ветки `docs/*` - для улучшения документации

### Правила наименования веток

Пример: `feature/#11-add-gitflow-description`

1) название начинается с названия группы задач
2) после названия группы указывается номер задачи (issue, в примере - `#11`) через `/`, ради которой данная ветка создается
3) после номера через дефис даем название ветки. В примере `-add-gitflow-description`

## Работа с ветками

### Разработка новых фич (Feature Branches)

Используются для работы над новой функциональностью

- Отводятся от `dev`
- Называются `feature/#<номер_issue>-<краткое_описание>`
- После завершения работы отправляются в PR (Pull Request) в `dev`
- PR сопровождается описанием изменений и ссылкой на issue


### Исправление багов (Bugfix Branches)

Используются для исправления ошибок в `dev`

- Отводятся от `dev`
- Называются `bugfix/#<номер_issue>-<краткое_описание>`
- После завершения работы отправляются в PR в `dev`

### Подготовка релиза (Release Branches)

Используются для подготовки новой версии перед отправкой в `main`

- Отводятся от `dev`
- Называются `release/<версия>`
- В них вносятся только исправления и финальные правки
- После завершения вмерживаются в `main` и `dev`, затем удаляются

### Срочные исправления в проде (Hotfix Branches)

Используются для критических исправлений в `main`.

- Отводятся от `main`
- Называются `hotfix/#<номер_ошибки>-<краткое_описание>`
- После завершения вмерживаются в `main` и `dev`, затем удаляются

### Улучшения в документации (Docs Branches)

Используются для внесения изменений в документацию перед отправкой в `dev`.

- Отводятся от `dev`
- Называются `docs/#<номер_issue>-<краткое_описание>`
- После завершения вмерживаются в `dev`, затем удаляются

## Работа с Pull Requests (PR)

- Каждый PR должен быть привязан к соответствующему issue
- В описании PR указываем `Closes #<номер_issue>` (автоматически закроет issue после мержа)
- Перед мержем проверяем код, исправляем замечания
- Один из разработчиков делает code review перед мержем

## Дополнительные правила

✅ Всегда обновляем ветку перед началом работы  
✅ После мержа удаляем временные ветки  
✅ Используем `git rebase` вместо `git merge`, если работаем в своей ветке, чтобы избежать лишних коммитов  

## Формат коммита

Формат сообщения коммита:

```
<тип>(<область>): <краткое описание>
```

### Типы коммитов:

Тип | Описание | Примеры
--- | --- | ---
feature | Добавление новой функциональности | `feature(<область>):` добавить авторизацию через Google<br><br>`feature(<область>):` реализовать корзину покупок<br><br>`feature(<область>):` добавить тёмную тему (dark mode)
fix | Исправление багов | `fix(<область>):` исправить падение при нулевой цене товара<br><br>`fix(<область>):` починить кнопку "Отправить" в форме<br><br>`fix(<область>):` утечка памяти в рендере списка
refactor | Рефакторинг кода без изменения логики | `refactor(<область>):` вынести API-запросы в отдельный сервис<br><br>`refactor(<область>):` заменить классы на хуки в React<br><br>`refactor(<область>):` оптимизировать структуру папок
chore | Технические изменения (конфиги, зависимости) | `chore(<область>):` обновить зависимости (webpack → v5)<br><br>`chore(<область>):` добавить настройки ESLint<br><br>`chore(<область>):` изменить конфиг Docker
docs | Изменения в документации | `docs(<область>):` добавить README с инструкцией<br><br>`docs(<область>):` обновить документацию API<br><br>`docs(<область>):` исправить описание метода в JSDoc
style | Правки стиля (форматирование, отступы) | `style(<область>):` исправить отступы в CSS<br><br>`style(<область>):` добавить точки с запятой в JS<br><br>`style(<область>):` привести код к единому стилю
test | Добавление или правка тестов | `test(<область>):` добавить тесты для AuthService<br><br>`test(<область>):` покрыть модуль корзины unit-тестами<br><br>`test(<область>):` исправить падающий тест API
perf | Оптимизация производительности | `perf(<область>):` ускорить загрузку списка товаров<br><br>`perf(<область>):` заменить цикл for на forEach<br><br>`perf(<область>):` добавить кеширование API-ответов
ci | Изменения в CI/CD (GitHub Actions, Jenkins) | `ci(<область>):` добавить сборку через GitHub Actions<br><br>`ci(<область>):` настроить авто-деплой на staging<br><br>`ci(<область>):` исправить ошибку в pipeline
build | Изменения в системе сборки | `build(<область>):` обновить версию билда (v1.2.0 → v1.3.0)<br><br>`build(<область>):` добавить генерацию sourcemaps<br><br>`build(<область>):` изменить настройки webpack
revert | Отмена предыдущего коммита | `revert(<область>):` вернуть старую реализацию API<br><br>`revert(<область>):` откатить коммит abc123 (из-за бага)<br><br>`revert(<область>):` вернуть предыдущую версию пакета


### Примеры коммитов:

✅ feature(auth): добавлен OAuth через Google  
✅ fix(cart): исправлена ошибка с пересчетом цен  
✅ docs(readme): обновлена инструкция по установке  

Если коммит связан с задачей или issue, добавляем `#123` (номер задачи/issue):
```
fix(api): исправлен баг с тайм-аутами (#123)
```

Если коммит закрывает задачу или issue, добавляем `close #123` (номер задачи/issue):
```
fix(api): исправлен баг с тайм-аутами (close #123)
```
